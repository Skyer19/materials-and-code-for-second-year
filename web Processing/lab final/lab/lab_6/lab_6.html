<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Document</title>
		<link rel="stylesheet" type="text/css" href="./css/style.css">
<!--		<link rel="stylesheet" type="text/css" href="reset.css">-->
	</head>
	<body>
	<h2 align="center">期末考试了，还购物？</h2>
		<table class="box" border="1">
			<tr class="header">
				<td width="90">
					<input type="checkbox" id="selectAll" />
					<label for="selectAll">全选</label>
				</td>
				<td width="230">商品</td>
				<td width="173">单价</td>
				<td width="127">数量</td>
				<td width="197">小计</td>
				<td>操作</td>
			</tr>
<!--			first product-->
			<tr>
				<td class="check">
					<input type="checkbox" class="checkt" />
				</td>
				<td class="proName">
					<img src="./images/1.jpg" height="70" width="70"/>
					<div class="proProductPic">Casio/卡西欧 EX-TR350</div>
				</td>
				<td class="proPirce"> 
					<span>5999.88</span>
				</td>
				<td class="proCount">
					<input type="button" value="-" class="plus_minus_button" />
					<input type="text" class="count" value="0" />
					<input type="button" value="+" class="plus_minus_button"/>
				</td>
				<td class="proMoney">
					<span><strong>0</strong></span>
				</td>
				<td>
					<input type="button" value="删除" class="proDel" />
				</td>
			</tr>
<!--			second product-->
			<tr>
				<td class="check">
					<input type="checkbox"  class="checkt"/>
				</td>
				<td class="proName">
					<img src="./images/2.jpg" height="70" width="70"/>
					<div class="proProductPic">Cannon/佳能 PowerShot</div>
				</td>
				<td class="proPirce"> 
					<span>34345</span>
				</td>
				<td class="proCount">
					<input type="button" value="-" class="plus_minus_button" />
					<input type="text" class="count" value="0" />
					<input type="button" value="+" class="plus_minus_button"/>
				</td>
				<td class="proMoney">
					<span><strong>0</strong></span>
				</td>
				<td>
					<input type="button" value="删除" class="proDel" />
				</td>
			</tr>
<!--			third product-->
			<tr>
				<td class="check">
					<input type="checkbox" class="checkt" />
				</td>
				<td class="proName">
					<img src="./images/3.jpg" height="70" width="70"/>
					<div class="proProductPic">Casio/卡西欧 EX-TR350</div>
				</td>
				<td class="proPirce"> 
					<span>43543</span>
				</td>
				<td class="proCount">
					<input type="button" value="-" class="plus_minus_button" />
					<input type="text" class="count" value="0" />
					<input type="button" value="+" class="plus_minus_button"/>
				</td>
				<td class="proMoney">
					<span><strong>0</strong></span>
				</td>
				<td>
					<input type="button" value="删除" class="proDel" />
				</td>
			</tr>
<!--			forth product-->
			<tr>
				<td class="check">
					<input type="checkbox" class="checkt" />
				</td>
				<td class="proName">
					<img src="./images/4.jpg" height="70" width="70"/>
					<div class="proProductPic">Casio/卡西欧 EX-TR350</div>
				</td>
				<td class="proPirce">
					<span>6565.0</span>
				</td>
				<td class="proCount">
					<input type="button" value="-" class="plus_minus_button" />
					<input type="text" class="count" value="0" />
					<input type="button" value="+" class="plus_minus_button"/>
				</td>
				<td class="proMoney">
					<span><strong>0</strong></span>
				</td>
				<td>
					<input type="button" value="删除" class="proDel" />
				</td>
			</tr>
<!--			fifth product-->
			<tr>
				<td class="check">
					<input type="checkbox"  class="checkt"/>
				</td>
				<td class="proName">
					<img src="./images/5.jpg" height="70" width="70"/>
					<div class="proProductPic">Casio/卡西欧 EX-TR350</div>
				</td>
				<td class="proPirce">
					<span>4354</span>
				</td>
				<td class="proCount">
					<input type="button" value="-" class="plus_minus_button" />
					<input type="text" class="count" value="0" />
					<input type="button" value="+" class="plus_minus_button"/>
				</td>
				<td class="proMoney">
					<span><strong>0</strong></span>
				</td>
				<td>
					<input type="button" value="删除" class="proDel" />
				</td>
			</tr>
<!--			sixth product-->
			<tr>
				<td class="check">
					<input type="checkbox" class="checkt" />
				</td>
				<td class="proName">
					<img src="./images/6.jpg" height="70" width="70"/>
					<div class="proProductPic">Casio/卡西欧 EX-TR350</div>
				</td>
				<td class="proPirce">
					<span>9775</span>
				</td>
				<td class="proCount">
					<input type="button" value="-" class="plus_minus_button" />
					<input type="text" class="count" value="0" />
					<input type="button" value="+" class="plus_minus_button"/>
				</td>
				<td class="proMoney">
					<span><strong>0</strong></span>
				</td>
				<td>
					<input type="button" value="删除" class="proDel" />
				</td>
			</tr>
<!--			seventh product-->
			<tr>
				<td class="check">
					<input type="checkbox" class="checkt" />
				</td>
				<td class="proName">
					<img src="./images/7.jpg" height="70" width="70"/>
					<div class="proProductPic">Casio/卡西欧 EX-TR350</div>
				</td>
				<td class="proPirce">
					<span>384594</span>
				</td>
				<td class="proCount">
					<input type="button" value="-" class="plus_minus_button" />
					<input type="text" class="count" value="0" />
					<input type="button" value="+" class="plus_minus_button"/>
				</td>
				<td class="proMoney">
					<span><strong>0</strong></span>
				</td>
				<td>
					<input type="button" value="删除" class="proDel" />
				</td>
			</tr>
			<tr class="footer">
<!--				<td width="90">-->
<!--					<input type="checkbox" id="selectAll" />-->
<!--					<label for="selectAll">全选</label>-->
<!--				</td>-->
				<td colspan="6">
					<div class="delAll">删除所有</div>
					<div class="proTotal">已选商品<span>0</span>件
<!--					<div class="popProduct">-->

<!--					</div>-->
					</div>

					<div class="totalPirces">合计：￥<span>0</span></div>
					<button id="pay" onclick="pay()">结算</button>
				</td>
			</tr>
		</table>

	</body>
	<script type="text/javascript" src="jquery-3.2.1.min.js"></script>
	<script type="text/javascript">
	// 六个触发事件地方
	// 全选  单选 删除 删除所有  加 减
	// 全选
	$("#selectAll").click(function(){
		$(".checkt").prop("checked", this.checked);	
		demo();
		// change();
	})
	// 单选
		$(".checkt").click(function(){
			$("#selectAll").prop("checked",$(".checkt:checked").length == $(".checkt").length);
			demo();
		})
	// 删除所有
	$(".delAll").click(function(){
		alert("确定删除??");
		$(".checkt:checked").parents("tr").remove();
		demo();
	})

	// 删除proDel
	$(".proDel").click(function(){
		alert("确定删除???");
		$(this).parents("tr").remove();
		demo();
	})
	// 加减proCount
	$(".plus_minus_button").click(function(){
		var _this=this
		var vals=($(_this).siblings(".count"))[0].value
		$(this).val()=="-"? vals=parseInt(vals)-1:vals=parseInt(vals)+1
		$(_this).siblings(".count").val(vals)
		if(($(_this).siblings(".count"))[0].value<=0){
			($(_this).siblings(".count"))[0].value=0;
		}
		// 改变小计proPirce
		var moneplus_minus_button=parseInt($(_this).siblings(".count").val())*$(_this).parents("td").siblings(".proPirce").children("span").html()
		$(_this).parents("td").siblings(".proMoney").children("span").html(moneplus_minus_button);
		demo();
	})
	// 改变合计和件数
	function demo(){
		
		$(".proTotal span").html($(".checkt:checked").length);
		$(".totalPirces span").html(function(){
			var monplus_minus_button = 0;
			$(".checkt:checked").parent().siblings(".proMoney").children().each(function(index, el){
				monplus_minus_button += parseInt(el.innerHTML);
			})

			return monplus_minus_button;
		})
	}

	function pay(){
		alert("期末考试了，还购物？");
	}

	</script>
</html>